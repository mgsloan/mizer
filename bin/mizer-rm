#!/usr/bin/env bash
set -e

if [ -z "$1" ]
then
  echo "No variants specified to remove."
  exit 1
fi

if [ -z "$GIT_MIZER_DIR" ]
then
  local_mizer="$PWD/.git-mizer"
  if [ -d "$local_mizer" ]
  then
    GIT_MIZER_DIR="$local_mizer"
  else
    echo "Expected to be in git-mizer shell or for .git-mizer to be present in current dir"
    exit 1
  fi
fi

for variant in "$@"
do
  echo ""
  echo "Attempting to remove \"$variant\""

  upper_dir="$GIT_MIZER_DIR/upper/$variant"

  if [ -d "$upper_dir" ]
  then
    rm -rf "$upper_dir"
    echo "Removed $upper_dir"
  else
    echo "Expected dir does not exist: $upper_dir"
  fi

  work_dir="$GIT_MIZER_DIR/work/$variant"

  if [ -d "$work_dir" ]
  then
    rm -rf "$work_dir"
    echo "Removed $work_dir"
  else
    echo "Expected dir does not exist: $work_dir"
  fi

done
